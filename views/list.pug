extends layout

mixin getPPList(arr, title)
    .pp-row
        .pp-title!= title
        .pp-list(id!=attributes.id)
            each person, index in arr
                if index < 5 && index != arr.length-1
                    | #{person},&nbsp;
                else if index==5 || (index==arr.length-1 && index<5)
                    | #{person}

mixin getListGroupItem(icon, title)
    .list-button(id!=attributes.id, onclick='changeState(this.id)')
        img(src=icon)
        span.button-title!= title

block content
    .flex-container
        #left
            #menu-open
                img(src='/images/icons/menu.png')
            #image-background(style="background-image: url('" + list._films[0]._poster + "')")
            #list
                #list-title= list._name
                #list-owner
                    a(href= '/channel/' + list._owner._id)= list._owner._name
                #slider
                    each film in list._films
                        a.list-item(href='/film/' + film._id)
                            img(src=film._poster)
                            .item-title= film._title
                if authch
                    .save-button(id!= list._id)
                        span.button-title СОХРАНИТЬ

        #right
            #film-info
                #rate
                    span#kp= list._films[0]._rating_kp
                    | &nbsp;/ 10
                h1#film-title
                    |#{list._films[0]._title} / #{list._films[0]._title_original}
                #short-info
                    | #{list._films[0]._year} | #{list._films[0]._genre}

                p.description!= list._films[0]._description
                +getPPList(list._films[0]._directors, 'Режиссер')(id='directors')
                +getPPList(list._films[0]._writers, 'Сценарий')(id='writers')
                +getPPList(list._films[0]._actors, 'В ролях')(id='actors')

            if authch
                .list-group
                    each alist in authch._lists
                        if alist._name == 'Любимые'
                            +getListGroupItem('/images/icons/heart.png', alist._name)(id=alist._id)
                        else if alist._name == 'Просмотренные'
                            +getListGroupItem('/images/icons/eye.png', alist._name)(id=alist._id)
                        else if alist._name == 'Буду смотреть'
                            +getListGroupItem('/images/icons/list.png', alist._name)(id=alist._id)
                    +getListGroupItem('/images/icons/sharp.png', 'ДРУГОЙ СПИСОК')(id='more-lists')
