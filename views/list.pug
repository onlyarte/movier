extends layout

mixin peopleList(arr, title)
    .pp-row
        .pp-title!= title
        .pp-list(id!=attributes.id)
            each person, index in arr
                if index != arr.length-1
                    | #{person},&nbsp;
                else 
                    | #{person}

block title
    title #{list.name} / MOVIER

block content
    script
        include ../public/javascripts/connect.js
        include ../public/javascripts/filmcontroller.js
        include ../public/javascripts/listcontroller.js
    
    #left
        #back(style=`background-image: url('${list.cover}')`)
        #front
            #list-info
                #list-title= list.name
                #list-owner
                    a(href=`/channel/${list.owner.id}`)= list.owner.name
            #slider
                each film in list.films
                    a.list-item(href=`/film/${film.id}`)
                        img(src=film.poster)
                        .item-title= film.title
            if state && state.owner
                #edit-button
                    span.button-title EDIT
            else
                #save-button
                    if state && state.saved
                        span.button-title(onclick=`l_unsave(this, ${list.id})`) UNSAVE
                    else
                        span.button-title(onclick=`l_save(this, ${list.id})`) SAVE
            

    #right
        #film-info
            #rate
                span#kp= list.films[0].rating
                | &nbsp;/ 10
            h1#film-title
                | #{list.films[0].title}
            #short-info
                | #{list.films[0].year} | #{list.films[0].genre}

            p.description!= list.films[0].description
            +peopleList([list.films[0].director], 'Режиссер')(id='directors')
            +peopleList(list.films[0].writers, 'Сценарий')(id='writers')
            +peopleList(list.films[0].stars, 'В ролях')(id='actors')
